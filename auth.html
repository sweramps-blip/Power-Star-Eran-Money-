<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Power Star | Secure Authentication</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* CSS design remains 100% same as your original */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%); background-attachment: fixed; color: white; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        .auth-container { background: rgba(30, 41, 59, 0.95); backdrop-filter: blur(20px); width: 100%; max-width: 440px; border-radius: 30px; padding: 40px 30px; border: 1px solid rgba(251, 191, 36, 0.3); box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6); position: relative; }
        .brand-logo { font-family: 'Orbitron', sans-serif; font-size: 32px; font-weight: 900; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-align: center; }
        h2 { color: #fbbf24; text-align: center; margin: 20px 0; }
        .form-group { position: relative; margin-bottom: 20px; }
        .form-label { display: block; color: #cbd5e1; font-size: 13px; margin-bottom: 8px; }
        .phone-prefix { position: absolute; left: 18px; top: 42px; color: #fbbf24; font-weight: 700; border-right: 2px solid #334155; padding-right: 12px; }
        input { width: 100%; background: rgba(15, 23, 42, 0.8); border: 2px solid rgba(51, 65, 85, 0.8); border-radius: 16px; padding: 16px 18px; color: white; outline: none; }
        .phone-input { padding-left: 70px !important; }
        .btn-primary { width: 100%; padding: 18px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); color: #000; font-weight: 700; border: none; border-radius: 16px; cursor: pointer; text-transform: uppercase; }
        .hidden { display: none; }
        .switch-form { text-align: center; margin-top: 25px; color: #94a3b8; font-size: 14px; }
        .switch-form span { color: #fbbf24; cursor: pointer; }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="brand-logo"><i class="fas fa-star"></i> POWER STAR</div>
        <div id="login-form">
            <h2>Secure Login</h2>
            <div class="form-group">
                <label class="form-label">Mobile Number</label>
                <span class="phone-prefix">+92</span>
                <input type="tel" id="login-number" class="phone-input" placeholder="3xxxxxxxxx" maxlength="10">
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" id="login-password" placeholder="Enter password">
            </div>
            <button class="btn-primary" onclick="handleLogin()">Login</button>
            <p class="switch-form">New? <span onclick="switchForm()">Create Account</span></p>
        </div>

        <div id="register-form" class="hidden">
            <h2>Join Power Star</h2>
            <div class="form-group"><input type="text" id="reg-name" placeholder="Full Name"></div>
            <div class="form-group">
                <span class="phone-prefix" style="top:18px">+92</span>
                <input type="tel" id="reg-number" class="phone-input" placeholder="3xxxxxxxxx" maxlength="10">
            </div>
            <div class="form-group"><input type="password" id="reg-password" placeholder="Password"></div>
            <div class="form-group"><input type="text" id="reg-referral" placeholder="Referral (Optional)"></div>
            <button class="btn-primary" onclick="handleRegistration()">Register</button>
            <p class="switch-form">Have account? <span onclick="switchForm()">Login</span></p>
        </div>
    </div>

    <script>
        const API_URL = "YOUR_SCRIPT_URL_HERE";
        const DEVICE_ID = "PS-" + btoa(navigator.userAgent).substring(0, 10);

        function switchForm() {
            document.getElementById('login-form').classList.toggle('hidden');
            document.getElementById('register-form').classList.toggle('hidden');
        }

        async function handleLogin() {
            const num = document.getElementById('login-number').value;
            const pass = document.getElementById('login-password').value;
            Swal.showLoading();
            const res = await fetch(`${API_URL}?action=login&number=${num}&password=${encodeURIComponent(pass)}`);
            const data = await res.json();
            if(data.success) {
                localStorage.setItem('user', JSON.stringify(data.data));
                window.location.href = 'dashboard.html';
            } else { Swal.fire('Error', data.message, 'error'); }
        }

        async function handleRegistration() {
            const name = document.getElementById('reg-name').value;
            const num = document.getElementById('reg-number').value;
            const pass = document.getElementById('reg-password').value;
            const ref = document.getElementById('reg-referral').value;
            
            if(!name || num.length < 10) return Swal.fire('Error', 'Invalid details', 'warning');
            
            Swal.showLoading();
            const params = new URLSearchParams({ action:'register', name, number:num, password:pass, referral:ref, device_id:DEVICE_ID });
            const res = await fetch(`${API_URL}?${params.toString()}`);
            const data = await res.json();
            if(data.success) {
                Swal.fire('Success', 'Registered!', 'success').then(() => switchForm());
            } else { Swal.fire('Failed', data.message, 'error'); }
        }
    </script>
</body>
</html>
